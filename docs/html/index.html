<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP Photo Processor: ESP Photo Processor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP Photo Processor
   </div>
   <div id="projectbrief">Program for opening and processing images taken by the Sr Robot&#39;s ESP32 camera</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ESP Photo Processor </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a></p>
<p>Written by Caleb Willson</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Documentation</h1>
<p>Full Doxygen documentation can be found in <a href="./docs.html">docs.html</a></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Cloning</h2>
<p>The repository and its submodules can be cloned with the following command.</p>
<div class="fragment"><div class="line">git clone --recurse-submodules https://github.com/CrWillson/ESPPhotoProcessor.git</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Dependencies</h2>
<p>This program requires both the QT5-base and OpenCV libraries to be installed through vcpkg. It also requires the use of the Visual Studio Community 2022 Release - amd64 compiler.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Summary</h1>
<p>This program is intended to be used as a test bed for new parameters and image processing pipelines for the SafeTown Senior Robot.</p>
<p>Images can be loaded into the program through two means outlined below.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
1. Integrated Line Following Program Image Saving</h2>
<blockquote class="doxtable">
<p>This method will require the virtual file system to be set up on the Pi Pico and for a substantial portion of the flash memory to be allocated to the file system. </p>
</blockquote>
<p>The regular line following program for the ESP32 has the ability to send photos to the Pi Pico when requested. To do this, the Pi Pico needs to send a <code>COMMAND_PACKET</code> type packet with the <code>CMD_REQUEST_IMAGE</code> command. Upon receiving an image request command, the next packet sent from the ESP32 to the Pico will contain an entire image. The Pico will then handle saving that image to its virtual file system.</p>
<p>Once the image is saved on the Pico, the user can navigate to it using the Pico's file explorer menu and select the option to print it over the serial line. This will, as the name implies, dump the entire file's contents onto the serial line. The purpose of <code>serial_monitor.py</code> is to read the serial line and automatically save any image files it sees back into a new file on the computer.</p>
<p>When an image is saved in this way, it will be saved in a compact hex format. This format is human readable and consists of 4 hex characters for each pixel and a newline for every row of pixels. In the current program, these files are loaded from the <code>/hex_images/</code> directory.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
2. SD-Card Image Saving Program</h2>
<blockquote class="doxtable">
<p>This method will requre a FAT32 formatted SD card and some means of reading an SD card on a computer. </p>
</blockquote>
<p>If the integrated method is too slow, there is also a dedicated program available for saving images from the ESP32. The <b>ESPCamera</b> is not capable of line following and only exists to save images to the SD card slot built onto the ESP32.</p>
<p>When the ESP32 is running the <b>ESPCamera</b> program, it will save one image to the SD card every time it boots up. Then, the reset button on the ESP32 can effectively be used as a shutter button, causing the ESP32 to reset and take a new photo.</p>
<p>When an image is saved this way, it will be saved as its raw binary. This format is not human readable but is more space effecient. It does not require the use of the serial port as the files can be transfered directly to the computer via the SD card. In the current program, images of this format are loaded from the <code>/binary_images/</code> directory. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
